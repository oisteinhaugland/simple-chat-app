(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t,n){e.exports=n(411)},176:function(e,t,n){},177:function(e,t,n){},187:function(e,t){},189:function(e,t){},224:function(e,t){},225:function(e,t){},317:function(e,t){},411:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),c=n(168),r=n.n(c),i=(n(176),n(177),n(19)),u=n(20),o=n(23),l=n(21),m=n(22),h=n(7),d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).changeView=n.changeView.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"changeView",value:function(){this.props.changeView("signup")}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("button",{className:"chat-button",onClick:this.changeView},"Send"))}}]),t}(a.Component),b=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={username:""},n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.username)}},{key:"render",value:function(){return s.a.createElement("div",{className:"form-container"},s.a.createElement("h1",null,"Let's Talk"),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},s.a.createElement("label",{htmlFor:"email"},"Lag deg et brukernavn!"),s.a.createElement("input",{type:"text",name:"username",onChange:this.handleChange,className:"input"}),s.a.createElement("button",{className:"submit"},"Send")))}}]),t}(a.Component),f=n(170),g=n(93),p=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",{className:"message-list"},this.props.messages.map(function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("h4",{className:"message-sender"},e.senderId),s.a.createElement("p",{className:"message-text"},e.text))}),s.a.createElement("li",null))}}]),t}(a.Component),j=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={message:""},n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.message),this.setState({message:""})}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit,className:"input-field"},s.a.createElement("input",{className:"message-input",type:"text",onChange:this.handleChange,value:this.state.message}),s.a.createElement("input",{className:"message-submit",type:"submit",value:"Send"}))}}]),t}(a.Component),v=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={currentUser:null,currentRoom:{users:[]},messages:[],users:[]},n.addMessage=n.addMessage.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;new g.ChatManager({instanceLocator:"v1:us1:372e9db9-ec86-4f22-aa3c-e63e03d57289",userId:this.props.currentId,tokenProvider:new g.TokenProvider({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/372e9db9-ec86-4f22-aa3c-e63e03d57289/token"})}).connect().then(function(t){return e.setState({currentUser:t}),t.subscribeToRoom({roomId:"19405949",messageLimit:100,hooks:{onMessage:function(t){e.setState({messages:[].concat(Object(f.a)(e.state.messages),[t])})}}})}).then(function(t){e.setState({currentRoom:t,users:t.userIds})}).catch(function(e){return console.log(e)})}},{key:"addMessage",value:function(e){this.state.currentUser.sendMessage({text:e,roomId:this.state.currentRoom.id}).catch(function(e){return console.error("error",e)})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",{className:"header"},"Heisann! Sp\xf8r oss om noe"),s.a.createElement(p,{messages:this.state.messages}),s.a.createElement(j,{className:"input-field",onSubmit:this.addMessage}))}}]),t}(a.Component),O=n(169),w=new(n.n(O).a)({instanceLocator:"v1:us1:372e9db9-ec86-4f22-aa3c-e63e03d57289",key:"0f6d0989-3c36-424f-ac9d-a43816dd5355:uSTNfJXbD9vEaYFJxbQpnGNYm1nhjxWcHxx2mkAbiZc="}),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={currentUsername:"",currentId:"",currentView:"signup"},n.changeView=n.changeView.bind(Object(h.a)(Object(h.a)(n))),n.createUser=n.createUser.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"createUser",value:function(e){var t=this;w.createUser({id:e,name:e}).then(function(n){t.setState({currentUsername:e,currentId:e,currentView:"chatApp"})}).catch(function(n){400===n.status?t.setState({currentUsername:e,currentId:e,currentView:"chatApp"}):console.log(n.status)})}},{key:"changeView",value:function(e){this.setState({currentView:e})}},{key:"render",value:function(){var e="";return"ChatMessage"===this.state.currentView?e=s.a.createElement(d,{changeView:this.changeView}):"signup"===this.state.currentView?e=s.a.createElement(b,{onSubmit:this.createUser}):"chatApp"===this.state.currentView&&(e=s.a.createElement(v,{currentId:this.state.currentId})),s.a.createElement("div",{className:"App"},e)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[171,1,2]]]);
//# sourceMappingURL=main.62321604.chunk.js.map